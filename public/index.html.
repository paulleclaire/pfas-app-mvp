<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PFAS App MVP</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body>
    <h1>PFAS App MVP</h1>
    <p id="status">Checking healthâ€¦</p>
    <h2>Latest PFAS news</h2>
    <ol id="news"></ol>
    <script>
      async function go() {
        try {
          const h = await fetch('/health').then(r => r.json());
          document.getElementById('status').textContent =
            `Status: ${h.ok ? 'OK' : 'Issue'} (uptime: ${h.uptime}s)`;
        } catch { document.getElementById('status').textContent = 'Health check failed'; }
        try {
          const items = await fetch('/api/news').then(r => r.json());
          const list = document.getElementById('news'); list.innerHTML = '';
          items.forEach(it => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = it.link; a.target = '_blank'; a.textContent = it.title;
            li.appendChild(a); list.appendChild(li);
          });
        } catch { document.getElementById('news').textContent = 'News load failed.'; }
      }
      go();
    </script>
  </body>
</html>